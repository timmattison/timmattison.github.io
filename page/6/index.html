
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Tim Mattison</title>
  <meta name="author" content="Tim Mattison">

  
  <meta name="description" content="Today I had to reinstall the Android plugin on my system and I recently upgraded to a 64-bit development VM. To my surprise the installation didn& &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.timmattison.com/page/6">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Tim Mattison" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-46746763-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Tim Mattison</a></h1>
  
    <h2>Hardcore tech</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.timmattison.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/2011/11/02/how-to-install-googles-android-eclipse-plugin-and-or-adb-on-64-bit-debian-ubuntu/">How-To: Install Google&#8217;s Android Eclipse Plugin (And/or Adb) on 64-bit Debian/Ubuntu</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-02T09:00:48-04:00" pubdate data-updated="true">Nov 2<span>nd</span>, 2011</time>
        
           | <a href="/archives/2011/11/02/how-to-install-googles-android-eclipse-plugin-and-or-adb-on-64-bit-debian-ubuntu/#disqus_thread"
             data-disqus-identifier="http://blog.timmattison.com/archives/2011/11/02/how-to-install-googles-android-eclipse-plugin-and-or-adb-on-64-bit-debian-ubuntu/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Today I had to reinstall the Android plugin on my system and I recently upgraded to a 64-bit development VM.  To my surprise the installation didn&rsquo;t go smoothly at all.  After restarting Eclipse twice I was constantly presented with two error messages &ldquo;Failed to parse the output of &lsquo;adb version&rsquo;&rdquo; and &ldquo;adb: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory&rdquo;.  Your system may also present another error message that reads &ldquo;adb: error while loading shared libraries: libstdc++.so.6: cannot open shared object file: No such file or directory&rdquo;.</p>

<p>I could see that it was looking for libncurses.so.5 however I know that ncurses is already installed on my machine in /lib as /lib/libncurses.so.5.  So where exactly was Eclipse/adb looking for it?  It turns out that it wants to find its libraries in the /lib32 directory but you can&rsquo;t just symlink it or you&rsquo;ll get an error that reads &ldquo;wrong ELF class: ELFCLASS64&rdquo;.  adb needs to have the 32-bit versions installed or it won&rsquo;t function at all.</p>

<p>So to get up and running just run the following command to fix the issue:</p>

<pre><code>sudo apt-get install lib32ncurses5 lib32stdc++6
</code></pre>

<p>After that just restart Eclipse and the issue should be fully put to bed.  Let me know how it works out for you or if you run into trouble.</p>

<p>If you still run into trouble like an error message that reads &ldquo;aapt: error while loading shared libraries: libz.so.1: cannot open shared object file: No such file or directory&rdquo; you need to install the ia32-libs like this:</p>

<pre><code>sudo apt-get install ia32-libs
</code></pre>

<p>Then rebuild your project and the errors should be gone.</p>

<p>UPDATE 2012-02-14: Rortian reports that the following command words on Fedora 16:</p>

<pre><code>yum install ncurses-libs.i686 libstdc++.i686 libgcc.i686
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/2011/11/01/how-to-run-teamviewer-6-as-root-in-linux-debian-ubuntu/">How-To: Run TeamViewer 6 as Root in Linux (Debian, Ubuntu)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-01T15:40:16-04:00" pubdate data-updated="true">Nov 1<span>st</span>, 2011</time>
        
           | <a href="/archives/2011/11/01/how-to-run-teamviewer-6-as-root-in-linux-debian-ubuntu/#disqus_thread"
             data-disqus-identifier="http://blog.timmattison.com/archives/2011/11/01/how-to-run-teamviewer-6-as-root-in-linux-debian-ubuntu/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you are reading this article I, unlike the rest of the Internet, will assume you have a good reason to run Teamviewer as root.  I won&rsquo;t spend my time trying to talk you out of it.  :)</p>

<p>You can accomplish this in just a few quick steps:</p>

<p>1) Install Teamviewer 6
2) Try to run it as root, if you get the message &ldquo;TeamViewer must not be executed as root!&rdquo; go on to step 3.  Otherwise, you are already set up.
3) Open /opt/teamviewer/teamviewer/6/bin/wrapper in your favorite text editor
4) Look for a line similar to this: &ldquo;validate_user                  # die if root&rdquo;
5) Put a single hash/octothorpe in front of the line and save it so it looks like &ldquo;#validate_user              # die if root&rdquo;.
6) Restart Teamviewer as root and you&rsquo;re good to go</p>

<p>Post in the comments if you used this tip and let me know if you run into any trouble.  This should work on other versions of Linux but the files may be in different places.  If you want to find your operating system&rsquo;s copy of &ldquo;wrapper&rdquo; try running &ldquo;locate wrapper | grep -i teamviewer&rdquo; and it should come up in the list.  If you don&rsquo;t have locate installed you can try the much slower: &ldquo;find / -name &#8220;wrapper&rdquo; | grep -i teamviewer&#8221; to do the same thing.  Good luck!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/2011/09/13/mini-hack-find-java-code-abusing-stdout/">Mini Hack: Find Java Code Abusing Stdout</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-13T18:04:39-04:00" pubdate data-updated="true">Sep 13<span>th</span>, 2011</time>
        
           | <a href="/archives/2011/09/13/mini-hack-find-java-code-abusing-stdout/#disqus_thread"
             data-disqus-identifier="http://blog.timmattison.com/archives/2011/09/13/mini-hack-find-java-code-abusing-stdout/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I found myself recently trying to determine where a particular piece of code was that was polluting my stdout stream with hundreds of unwanted messages.  This seemed like an impossible task since I could only guess that there was a line of code somewhere that was calling System.out.println(clazz.toString()) or something similar.  I searched the codebase high and low and found nothing.</p>

<p>After some Googling I came up with an alternate approach.  I disabled all of the code I could find that printed to stdout (actually this was easy since I do it all with one function so I just disabled that) and verified that I my application was still spewing out noise.  Sure enough it was and then I added a tiny chunk of code to my application&rsquo;s initialization.  That code takes over stdout and forcibly causes a NullPointerException.  It&rsquo;s unconventional and I probably could&rsquo;ve just put in a breakpoint but I wanted to make sure it crashed and spat out something I could work with immediately.</p>

<p>Here is what I did:</p>

<pre><code>System.setOut(new PrintStream(new OutputStream() {
  @Override
  public void write(int arg0) throws IOException {
    String forcedCrash = null;
    forcedCrash = forcedCrash + " ";
  }
}));
</code></pre>

<p>Let me know in the comments if you get a chance to use this to debug a project.  Since I came up with this technique I find myself putting it in action a lot more often than I thought I would so hopefully it&rsquo;ll be useful for you too.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/2011/08/10/how-to-defragment-a-linux-system/">How-To: Defragment a Linux System</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-08-10T10:27:46-04:00" pubdate data-updated="true">Aug 10<span>th</span>, 2011</time>
        
           | <a href="/archives/2011/08/10/how-to-defragment-a-linux-system/#disqus_thread"
             data-disqus-identifier="http://blog.timmattison.com/archives/2011/08/10/how-to-defragment-a-linux-system/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Many people claim that Linux, Unix, and Mac OS do not need to be defragmented.  This is simply not true.  <a href="http://osxbook.com/software/hfsdebug/fragmentation.html">OSXBook explains that Apple&rsquo;s file systems fragment</a> and ext3 does as well.  To put it simply there are no file systems that I know of that do not fragment.  Even Apple&rsquo;s automatic defragmentation (why would it be there if it didn&rsquo;t fragment in the first place?) has limitations that cause file fragments to accumulate over time.  The value of defragmentation may be questionable to some but in my own informal tests I&rsquo;ve seen the read speeds on large sequential files like virtual machine snapshots double after defragmentation.</p>

<p>Anyway, my Linux machines were seeming sluggish lately and I decided to figure out how to install <a href="http://vleu.net/shake/">Shake</a> to remedy the problem.  The installation isn&rsquo;t bad but I&rsquo;ve already figured it out for you so just follow these steps to get yourself set up:</p>

<ol>
<li><p> Add these lines to your /etc/apt/sources.list:</p>

<p>deb <a href="http://ppa.launchpad.net/un-brice/ppa/ubuntu">http://ppa.launchpad.net/un-brice/ppa/ubuntu</a> maverick main
deb-src <a href="http://ppa.launchpad.net/un-brice/ppa/ubuntu">http://ppa.launchpad.net/un-brice/ppa/ubuntu</a> maverick main</p></li>
<li><p> Run this command to add the author&rsquo;s key to your apt configuration:</p>

<p>sudo apt-key adv &mdash;keyserver keyserver.ubuntu.com &mdash;recv-keys E2235DBB</p></li>
<li><p> Update your apt database:</p>

<p>sudo apt-get update</p></li>
<li><p> Install shake-fs:</p>

<p>sudo apt-get install shake-fs</p></li>
<li><p> Get a baseline of your existing fragmentation on the entire filesystem:</p>

<p>sudo shake -pvv / | awk &lsquo;{ printf(&ldquo;%06d,%s\n&rdquo;, $4, $8) }&rsquo; | sort > shake.full-output.before</p></li>
</ol>


<p>Now you can look at the output in shake.full-output.before and see where you have fragmentation problems.  If you just want to run the defrag on the whole disk and include every file regardless of age and size do this:</p>

<pre><code>sudo shake --old=0 --bigsize=0 -X /
</code></pre>

<p>This will take a decent amount of time and will really sap the machine&rsquo;s performance.  Don&rsquo;t do this until you have a window of time where you can afford to not use the machine.</p>

<p>Finally, compare your before and after:</p>

<pre><code>sudo shake -pvv / | awk '{ printf("%06d,%s\n", $4, $8) }' | sort &gt; shake.full-output.after
tail shake.full-output.*
</code></pre>

<p>Hopefully now the worst offenders at the bottom of the after file will be a bit more tidy.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/2011/07/12/how-to-fix-vmware-connectivity-problems-after-installing-avast-internet-security/">How-To: Fix VMware Connectivity Problems After Installing Avast! Internet Security</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-12T08:59:23-04:00" pubdate data-updated="true">Jul 12<span>th</span>, 2011</time>
        
           | <a href="/archives/2011/07/12/how-to-fix-vmware-connectivity-problems-after-installing-avast-internet-security/#disqus_thread"
             data-disqus-identifier="http://blog.timmattison.com/archives/2011/07/12/how-to-fix-vmware-connectivity-problems-after-installing-avast-internet-security/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am a big fan of the Avast! line of security products.  I just upgraded from Pro to Internet Security since I got a new laptop and getting the Pro version for that was the same price as the Internet Security version and I figured that an added firewall couldn&rsquo;t hurt.  Naturally, it&rsquo;s never that simple and I realized that after I rebooted the firewall was causing the web browsers in my virtual machines to lose access to the Internet.  I was still able to ping things via the command line but I couldn&rsquo;t do much else.</p>

<p>In order to fix this I found out that you just need to do the following steps and you&rsquo;re back online:</p>

<ol>
<li><p> Open Avast!</p></li>
<li><p> Click the Firewall tab</p></li>
<li><p> Make sure the Firewall Settings sub-tab is selected</p></li>
<li><p> Click &ldquo;Expert Settings&rdquo; next to the &ldquo;Stop&rdquo; button</p></li>
<li><p> Check &ldquo;Internet Connection Sharing mode&rdquo;</p></li>
<li><p> Click OK</p></li>
<li><p> Close Avast!</p></li>
</ol>


<p>Now your VMs are back online.  Post in the comments if you found it useful.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/2011/07/07/how-to-get-vmware-virtual-machines-to-use-three-or-more-monitors/">How-To: Get VMware Virtual Machines to Use Three or More Monitors</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-07-07T08:52:27-04:00" pubdate data-updated="true">Jul 7<span>th</span>, 2011</time>
        
           | <a href="/archives/2011/07/07/how-to-get-vmware-virtual-machines-to-use-three-or-more-monitors/#disqus_thread"
             data-disqus-identifier="http://blog.timmattison.com/archives/2011/07/07/how-to-get-vmware-virtual-machines-to-use-three-or-more-monitors/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I just upgraded from a dual monitor to a triple monitor setup.  The strange thing was that when I went into my virtual machines, after rebooting them to recognize the new graphics cards, I couldn&rsquo;t get them to span all three displays.  When I pressed the button to switch monitor configurations it would alternate between the combinations of two different displays and then it would go to a configuration where the display was double width but centered across all three displays.  This left windows split across monitors and large vertical black bars on either side of things.  It wasn&rsquo;t pretty but I figured out what was wrong.</p>

<p>VMware has a notion of a virtual machine&rsquo;s video RAM.  By default this value is too low to support three 1920 x 1080 displays.  In order to fix this do the following:</p>

<ol>
<li><p> Determine the resolution of each of your screens.  In my case they all were 1920 x 1080.</p></li>
<li><p> Calculate the pixel count by multiplying the vertical resolution by the horizontal resolution.  This gave me 2,073,600.</p></li>
<li><p> Multiply each screen&rsquo;s pixel count by 4 (1 byte per pixel and 1 byte for alignment).  This gave me 8,294,400.</p></li>
<li><p> Add all of the values from step 3 together.  This now gives me 8,294,400 * 3 for my three displays so my total is 24,883,200 (approximately 24 MB).  This is approximately how many bytes of video memory you need.</p></li>
<li><p> Add a margin of error of about another 8,000,000.  This bumped my value up to 33,000,000.</p></li>
<li><p> Back up your VMX file and your VM.</p></li>
<li><p> Edit the VMX file and add this line at the bottom but replace 33000000 with your value from step 5. Note: Search the file to make sure this line doesn&rsquo;t exist already. If it does you&rsquo;ll need to modify it instead of adding a second one.</p>

<p>svga.vramSize=33000000</p></li>
<li><p> Save the configuration file and restart your VM</p></li>
</ol>


<p>That&rsquo;s it.  You&rsquo;ll now be able to run as many displays as you can afford.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/2011/06/30/how-to-extract-java-exceptions-from-tomcat-logs/">How-To: Extract Java Exceptions From Tomcat Logs</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-30T18:39:02-04:00" pubdate data-updated="true">Jun 30<span>th</span>, 2011</time>
        
           | <a href="/archives/2011/06/30/how-to-extract-java-exceptions-from-tomcat-logs/#disqus_thread"
             data-disqus-identifier="http://blog.timmattison.com/archives/2011/06/30/how-to-extract-java-exceptions-from-tomcat-logs/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve been digging through exceptions lately and it&rsquo;s sometimes a pain to dig through the Tomcat logs depending on your logging level.  Although it might sound like you should just turn your logging levels down sometimes that&rsquo;s not feasible.  If you want to get right to the exceptions I whipped up a little script that does exactly that so you can skip all of the log cruft and get right to the problem(s) you are looking to fix.  Just pipe or redirect your log into this script and the output will be a list of exceptions and their stack traces.  The output could potentially be huge to piping it through less or redirecting it to another file may make sense.</p>

<p>Here&rsquo;s the script (exceptions-only.pl) and there&rsquo;ll be more soon&hellip;</p>

<pre><code>#!/usr/bin/perl -w

# The two states we can be in in our state machine.  Either looking for an exception or we found an exception.
my $state_looking_for_exception = 0;
my $state_found_exception = 1;

# Start out looking for an exception, clear the output and the last time value
my $state = $state_looking_for_exception;
my $output = "";
my $last_time = "";

# Eat everything STDIN can give us
while() {
  my $line = $_;
  chomp $line;

  # Are we looking for an exception
  if($state == $state_looking_for_exception) {
    # Yes, did we find one?
    if($line =~ m/^[0-9a-zA-Z\.]*Exception:/) {
      # Yes, change state
      $state = $state_found_exception;

      # Do we have a timestamp for it?
      if($last_time ne "") {
        # Yes, add the timestamp data
        $output .= "\n\n--- Start of exception at $last_time ---\n\n";
      }

      # Append the exception data to our output
      $output .= $line . "\n";
    }
    # Didn't find an exception, does this look like a timestamp?
    elsif($line =~ m/^[A-Za-z]{3} [0-9]{1,2}, [0-9]{4} [0-9]{2}:[0-9]{2}:[0-9]{2}/) {
      # Yes, save it as the last time we've seen
      $last_time = $line;
    }
  }
  # Not looking for an exception, did we already find one?
  elsif($state == $state_found_exception) {
    # Yes, does this line start with whitespace?
    if(!($line =~ m/^\s/)) {
      # No, no more stack trace data.  Change state.
      $state = $state_looking_for_exception;

      # Do we have a timestamp for it?
      if($last_time ne "") {
        # Yes, add the timestamp data
        $output .= "\n\n--- End of exception at $last_time ---\n\n";

        # Clear out the last time since we're done with this exception
        $last_time = "";
      }
    }
    else {
      # Yes, this line starts with whitespace so it is stack trace data.  Append it to our output.
      $output .= $line . "\n";
    }
  }
}

# Print the output and we're done
print $output;
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/2011/06/23/how-to-fix-eclipse-tomcat-and-spring-when-things-stop-working/">How-To: Fix Eclipse, Tomcat, and Spring When Things Stop Working</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-23T19:15:16-04:00" pubdate data-updated="true">Jun 23<span>rd</span>, 2011</time>
        
           | <a href="/archives/2011/06/23/how-to-fix-eclipse-tomcat-and-spring-when-things-stop-working/#disqus_thread"
             data-disqus-identifier="http://blog.timmattison.com/archives/2011/06/23/how-to-fix-eclipse-tomcat-and-spring-when-things-stop-working/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Update 2011-12-23: I&rsquo;m experiencing this error less and less lately but I&rsquo;ve significantly streamlined the process.</p>

<p>We&rsquo;ve all experienced this scenario before&hellip; you&rsquo;re working on a Java project with Spring, you restart your server and everything stops working. Normally you&rsquo;d see something like this:</p>

<pre><code>INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Jun 23, 2011 7:06:02 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 654 ms
Jun 23, 2011 7:06:02 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jun 23, 2011 7:06:02 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.14
</code></pre>

<p>Followed by this to let you know Spring is doing its thing:</p>

<pre><code>Jun 23, 2011 7:06:12 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
</code></pre>

<p>And then finally this to let you know it&rsquo;s ready:</p>

<pre><code>Jun 23, 2011 7:06:21 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 18871 ms
</code></pre>

<p>In this case you get no messages about Spring. Your server starts up really quickly but nothing runs. Everything returns a 404. This is bad.</p>

<p>If you&rsquo;re feeling like you want to spend a few hours figuring it out then hats off to you.  I, on the other hand, have never seen a reliable fix for this other than the sledgehammer method I&rsquo;m about to show you below.</p>

<p>Caution!  You are about to do something drastic that works for me but may not work for you.  It is possible that by doing this you will break lots of things and lose data.  This is a complete clean start for your server.  Make a backup, make sure you can restore that backup, and proceed with caution.  When in doubt, bail out.</p>

<ol>
<li><p> Stop your servlet container</p></li>
<li><p> Close Eclipse.</p></li>
<li><p> Go to your workspace in a console and navigate to the .metadata/.plugins directory</p></li>
<li><p> Forcibly remove the org.eclipse.wst.server.core directory.  This will delete all of your entries in &ldquo;Servers&rdquo;, be careful!  I use</p>

<p>rm -rf org.eclipse.wst.server.core/</p></li>
<li><p> Restart Eclipse</p></li>
<li><p> Recreate your servers and launch your application.  You should be good to go.</p></li>
</ol>


<p>I did say it wasn&rsquo;t elegant, didn&rsquo;t I?  Either way this has saved me dozens of hours of debugging.  I&rsquo;ve had some Java gurus suggest a lot of things to try but none of them worked 100% of the time.  This one has never failed me.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/2011/06/22/mini-hack-create-read-only-properties-with-hibernate-fixes-propertynotfoundexception-could-not-find-a-setter-issues/">Mini Hack: Create Read-only Properties With Hibernate (Fixes &#8220;PropertyNotFoundException: Could Not Find a Setter&#8221; Issues)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-22T14:51:58-04:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2011</time>
        
           | <a href="/archives/2011/06/22/mini-hack-create-read-only-properties-with-hibernate-fixes-propertynotfoundexception-could-not-find-a-setter-issues/#disqus_thread"
             data-disqus-identifier="http://blog.timmattison.com/archives/2011/06/22/mini-hack-create-read-only-properties-with-hibernate-fixes-propertynotfoundexception-could-not-find-a-setter-issues/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Ok, this mini-hack isn&rsquo;t pretty but it solves an issue that I have seen come up many times in Java.  You&rsquo;re trying to add a method to an object that you want Hibernate to persist.  Let&rsquo;s assume that your object is an elevator and it has the following real properties:</p>

<ul>
<li>Current floor (int)</li>
<li>Hours in use (int)</li>
<li>Pounds in elevator (int)</li>
</ul>


<p>You want to add a method that tells you how many days it has been in use.  Normally you&rsquo;d do this:</p>

<pre><code>public double getDaysInUse() {
  return this.hoursInUse / 24.0;
}
</code></pre>

<p>However, if you do that you get the dreaded &ldquo;PropertyNotFoundException: Could not find a setter&rdquo; error.  How do we fix this?  Simply with a throw away parameter like this:</p>

<pre><code>public double getDaysInUse(int unused) {
  return this.hoursInUse / 24.0;
}
</code></pre>

<p>And there you have it.  No more error!  I&rsquo;m sure there&rsquo;s a better way and when I find it I&rsquo;ll post again but for now this does the trick.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/archives/2011/06/22/how-to-fix-hibernate-sql-errors-when-using-restrictions-in/">How-To: Fix Hibernate SQL Errors When Using Restrictions.in</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-06-22T12:36:03-04:00" pubdate data-updated="true">Jun 22<span>nd</span>, 2011</time>
        
           | <a href="/archives/2011/06/22/how-to-fix-hibernate-sql-errors-when-using-restrictions-in/#disqus_thread"
             data-disqus-identifier="http://blog.timmattison.com/archives/2011/06/22/how-to-fix-hibernate-sql-errors-when-using-restrictions-in/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Hibernate currently has some issues with Restrictions.in.  Basically if you try to pass it NULL it generates invalid SQL on at least MySQL and PostgreSQL.  I found a <a href="http://www.celerity.nl/blog/2009/01/hibernate-creating-invalid-quries-from-empty-lists/">blog post outlining how to fix this issue</a> and <a href="http://opensource.atlassian.com/projects/hibernate/browse/HHH-2776">the accompanying JIRA issue</a> which confirms that I&rsquo;m not the only one having this problem.  Unfortunately this person&rsquo;s fix didn&rsquo;t work for me but I think that&rsquo;s because they&rsquo;re using MySQL and I&rsquo;m using PostgreSQL.  Differences in the driver still make this fail on PostgreSQL.</p>

<p>In order to remedy this I set out to find a better solution that would hopefully work on Hibernate with any backend.  What I came up with, <a href="http://stackoverflow.com/questions/2667131/is-there-something-like-restrictions-eqtrue-false-in-criteria-api">with some help from StackOverflow</a>, is this:</p>

<pre><code>﻿﻿public static &lt;M&gt; void addInRestriction(DetachedCriteria dc, String idDbField, List ids) {
    // Is our list empty?
    if ((ids != null) &amp;&amp; (ids.size() &gt; 0)) {
        // No, add this restriction to the detached object
        dc.add(Restrictions.in(idDbField, ids));
    } else {
        // Yes, our list is empty.  Make this always fail.
        // From: http://stackoverflow.com/questions/2667131/is-there-something-like-restrictions-eqtrue-false-in-criteria-api
        dc.add(Restrictions.sqlRestriction("(1=0)"));
    }
}
</code></pre>

<p>I put this in a class with some other Hibernate helper functions and now instead of doing this:</p>

<pre><code>dc.add(Restrictions.in("fieldName", fieldValues));
</code></pre>

<p>I do this:</p>

<pre><code>HibernateQueryUtils.addInRestriction(dc, "fieldName", fieldValues);
</code></pre>

<p>This fixed all of my Hibernate issues when passing it a NULL or even an empty list.  Hope it works for you too!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/7/">&larr; Older</a>
    
    <a href="/archives">Archives</a>
    
    <a class="next" href="/page/5/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
	<h1>Like this site/article?  Donate with Bitcoin!</h1>
	<a href="bitcoin:1PcYJnuZPZFWUMUHzzBGHHshEbrVzYpY9Y"><img src="http://blockchain.info/qr?data=1PcYJnuZPZFWUMUHzzBGHHshEbrVzYpY9Y&size=200" alt="Bitcoin"></a>
	<a href="bitcoin:1PcYJnuZPZFWUMUHzzBGHHshEbrVzYpY9Y">1PcYJnuZPZFWUMUHzzBGHHshEbrVzYpY9Y</a>
</section>
<section>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Sidebar -->
<ins class="adsbygoogle"
     style="display:inline-block;width:120px;height:240px"
     data-ad-client="ca-pub-9307090849713032"
     data-ad-slot="1616086903"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/archives/2014/08/05/using-guice-dependency-injection-with-quartz-schedulding/">Using Guice Dependency Injection With Quartz Schedulding</a>
      </li>
    
      <li class="post">
        <a href="/archives/2014/07/17/fenced-code-blocks-in-ordered-lists-in-octopress/">Fenced Code Blocks in Ordered Lists in Octopress</a>
      </li>
    
      <li class="post">
        <a href="/archives/2014/07/16/common-android-wear-tasks-for-developers/">Common Android Wear Tasks for Developers</a>
      </li>
    
      <li class="post">
        <a href="/archives/2014/07/15/tip-bringing-your-working-directory-pwd-to-another-terminal-window-in-mac-os/">Tip: Bringing Your Working Directory (Pwd) to Another Terminal Window in Mac OS</a>
      </li>
    
      <li class="post">
        <a href="/archives/2014/06/25/automating-cisco-switch-interactions/">Automating Cisco Switch Interactions</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/timmattison">@timmattison</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'timmattison',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/timmattison?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Tim Mattison -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'timmattison';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
